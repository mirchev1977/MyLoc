import React, { Component } from 'react';
import {Map, InfoWindow, Marker, GoogleApiWrapper} from 'google-maps-react';

export class GMap extends Component {
    constructor ( props ) {
        super( props );
        this.state = {
            lat: '',
            lng: '',
        };
        this.getGeolocation = this.getGeolocation.bind( this );
    }

    componentWillMount() {
        if ( window.navigator.geolocation ) {
            window.navigator.geolocation.getCurrentPosition( ( position ) => {
                let coords = position.coords;
                this.setState( { lat: coords.latitude, lng: coords.longitude } );
                this.forceUpdate();
            } );
        }
    }

    getGeolocation () {
        return this.state.currentGeolocation;
    }

    render() {
        return(
            <Map 
            google={this.props.google} 
            //initialCenter={ { lat: 42.7142092, lng: 23.2730744  } }
            initialCenter={ { lat: this.state.lat, lng: this.state.lng  } }
            name={ 'Current Location' }
            zoom={14}></Map>
        );
    }
}

export default GoogleApiWrapper({
  apiKey: ( 'AIzaSyAVrOK49i5e3Mk8xv7PdHa_91JhvfpGEaM' )
})(GMap);
